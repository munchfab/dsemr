---
# title: "Template Title"
# author: "Your Name"
# date: "The Date"
output: pdf_document
documentclass: standalone
classoption:
  tikz=true
header-includes: 
  - \usepackage{tikz}
  - \usepackage{pgfplots}
  - \pgfplotsset{compat=1.18}
  - \usetikzlibrary{shapes, positioning, calc, decorations.markings, chains, scopes}
  - \newlength{\Radius}
  - \setlength\Radius{4em}
  - \usepackage{amsmath}
  - \usepackage{caption}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


\begin{tikzpicture}[
    auto, > = latex, align=center,
  	latent/.style = {
  	  circle, draw, thick, inner sep = 2pt, minimum width = \Radius
  	},
  	manifest/.style = {
  	  rectangle, draw, thick, inner sep = 0pt, minimum size = \Radius/2
  	},
  	intercept/.style = {
  	  regular polygon,regular polygon sides = 3, draw, thick,
  	  inner sep = 0pt, minimum size = \Radius
  	},
  	mean/.style = {
  	  regular polygon, regular polygon sides = 3, draw, thick,
  	  inner sep = 0pt, minimum size = 8mm
  	},
  	path/.style = {
  	  arrows = ->, thick, > = {stealth[]}
  	},
  	error/.style = {
  	  circle, draw = none, fill = none, thick,
  	  inner sep = 0pt, minimum size = 5mm
  	},
  	var/.style = {
  	  <->, thick, > = {stealth[]}, bend right = 270, looseness = 2
  	},
  	cov/.style = {
  	  <->, thick, > = {stealth[]}, bend right = 300
  	},
  	% style to add a circle in the middle of a path
    random/.style = {
      postaction = {
        decorate, decoration = {
          markings,
          mark = at position .5 with {
            \draw[fill = black] circle[radius = 2pt];
          }
        }
      }
    },
    random_cl/.style = {
      postaction = {decorate, decoration = {
        markings,
        mark = at position .2 with {
          \draw[fill = black] circle[radius = 2pt];}
        }
      }
    },
  	]

    % draw decomposition
    \node  [manifest] (y1t)  {$y_{1,t}$};
    \node  [latent]  (y1wt)  [above = 2.5em of y1t]  {$y_{1,t}^w$};
    \node  [latent]  (mu_1)  [below = 2.5em of y1t]  {$\mu_{1}$};

    % draw paths
    \draw  [path]  (y1wt)  to node  []  {}  (y1t);
    \draw  [path]  (mu_1)  to node  []  {}  (y1t);
    
% caption
  \node  [above = 1em, align = center]  at  (current bounding box.north)  {Decomposition.};
\end{tikzpicture}\begin{tikzpicture}[
    auto, > = latex, align=center,
  	latent/.style = {
  	  circle, draw, thick, inner sep = 2pt, minimum width = \Radius
  	},
  	manifest/.style = {
  	  rectangle, draw, thick, inner sep = 0pt, minimum size = \Radius/2
  	},
  	intercept/.style = {
  	  regular polygon,regular polygon sides = 3, draw, thick,
  	  inner sep = 0pt, minimum size = \Radius
  	},
  	mean/.style = {
  	  regular polygon, regular polygon sides = 3, draw, thick,
  	  inner sep = 0pt, minimum size = 8mm
  	},
  	path/.style = {
  	  arrows = ->, thick, > = {stealth[]}
  	},
  	error/.style = {
  	  circle, draw = none, fill = none, thick,
  	  inner sep = 0pt, minimum size = 5mm
  	},
  	var/.style = {
  	  <->, thick, > = {stealth[]}, bend right = 270, looseness = 2
  	},
  	cov/.style = {
  	  <->, thick, > = {stealth[]}, bend right = 300
  	},
  	% style to add a circle in the middle of a path
    random/.style = {
      postaction = {
        decorate, decoration = {
          markings,
          mark = at position .5 with {
            \draw[fill = black] circle[radius = 2pt];
          }
        }
      }
    },
    random_cl/.style = {
      postaction = {decorate, decoration = {
        markings,
        mark = at position .2 with {
          \draw[fill = black] circle[radius = 2pt];}
        }
      }
    },
  	]

    % draw within-level structural model
    \node  [latent]  (y1wt-1)  {$y_{1,t-1}^w$};
    \node  [latent]  (y1wt)  [right = 5em of y1wt-1]  {$y_{1,t}^w$};
    \node  [latent]  (delta1t)  [right = 2.5em of y1wt]  {$\delta_{{y_1},t}$};

    % draw paths
    \draw  [path]  (delta1t)  to node  []  {}  (y1wt);
    
\draw  [path, postaction = random]  (y1wt-1)  to node  []  {$\phi_{1}$}  (y1wt);
\draw  [var, postaction = random]  (delta1t.120)  to node  []  {$\pi_{1}$}  (delta1t.60);
% caption
  \node  [above = 1em, align = center]  at  (current bounding box.north)  {Within-model.};
\end{tikzpicture}\begin{tikzpicture}[
    auto, > = latex, align=center,
  	latent/.style = {
  	  circle, draw, thick, inner sep = 2pt, minimum width = \Radius
  	},
  	manifest/.style = {
  	  rectangle, draw, thick, inner sep = 0pt, minimum size = \Radius/2
  	},
  	intercept/.style = {
  	  regular polygon,regular polygon sides = 3, draw, thick,
  	  inner sep = 0pt, minimum size = \Radius
  	},
  	mean/.style = {
  	  regular polygon, regular polygon sides = 3, draw, thick,
  	  inner sep = 0pt, minimum size = 8mm
  	},
  	path/.style = {
  	  arrows = ->, thick, > = {stealth[]}
  	},
  	error/.style = {
  	  circle, draw = none, fill = none, thick,
  	  inner sep = 0pt, minimum size = 5mm
  	},
  	var/.style = {
  	  <->, thick, > = {stealth[]}, bend right = 270, looseness = 2
  	},
  	cov/.style = {
  	  <->, thick, > = {stealth[]}, bend right = 300
  	},
  	% style to add a circle in the middle of a path
    random/.style = {
      postaction = {
        decorate, decoration = {
          markings,
          mark = at position .5 with {
            \draw[fill = black] circle[radius = 2pt];
          }
        }
      }
    },
    random_cl/.style = {
      postaction = {decorate, decoration = {
        markings,
        mark = at position .2 with {
          \draw[fill = black] circle[radius = 2pt];}
        }
      }
    },
  	]

    % draw between-level structural model
    \node  [latent]  (mu_1)  {$\mu_{1}$};
    \node  [latent]  (phi_11)  [right = 1.5em of mu_1]  {$\phi_{11}$};
    \node  [latent]  (lnsigma2_1)  [right = 1.5em of phi_11]  {$\log(\pi_{1})$};

    
\draw  [cov]  (mu_1.north)  to node  []  {}  (phi_11.north); \draw  [cov]  (mu_1.north)  to node  []  {}  (lnsigma2_1.north); \draw  [cov]  (phi_11.north)  to node  []  {}  (lnsigma2_1.north);
% caption
  \node  [above = 1em, align = center]  at  (current bounding box.north)  {Between-model.};
\end{tikzpicture}